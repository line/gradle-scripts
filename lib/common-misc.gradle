allprojects {
    ext {
        hasSourceDirectory = this.&hasSourceDirectory.curry(project)
    }
}

static boolean hasSourceDirectory(Project project, String name) {
    def queue = [] as Queue
    queue.add([
            dir: new File(project.projectDir, 'src'),
            depth: 0,
    ])
    while (queue.size() > 0) {
        def e = queue.poll()

        def children = e.dir.listFiles(new FileFilter() {
            @Override
            boolean accept(File pathname) {
                return pathname.isDirectory()
            }
        })
        for (child in children) {
            if (child.getName() == name) {
                return true
            }
            if (e.depth < 3) {
                queue.add([
                        dir  : child,
                        depth: e.depth + 1,
                ])
            }
        }
    }
    return false
}
