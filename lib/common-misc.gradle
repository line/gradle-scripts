allprojects {
    ext {
        hasSourceDirectory = this.&hasSourceDirectory.curry(project)
    }
}

static boolean hasSourceDirectory(Project project, String name) {
    def queue = [] as Queue<File>
    queue.add(new File(project.projectDir, 'src'))
    while (queue.size() > 0) {
        def dir = queue.poll()
        def children = dir.listFiles(new FileFilter() {
            @Override
            boolean accept(File pathname) {
                return pathname.isDirectory()
            }
        })
        for (child in children) {
            if (child.getName() == name) {
                return true
            }
            queue.add(child)
        }
    }
    return false
}
